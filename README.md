# Библиотека для имитации Системы Массового Обслуживания (СМО)

## Как использовать?
1. Форкаем репозиторий, или любым удобным методом доставляем .h и .cc файлы к себе в проект.
2. Наследуемся от класса `SimulatorBase`.

    Для этого реализуем следующие методы:

    - `PutInBuffer` - положить заявку в буфер. Если удалось положить, возвращаем
      `std::nullopt`, а если нет, то возвращаем отказанную заявку.
    - `TakeOutOfBuffer` - достать заявку из буфера. Если буфер пуст, то возвращаем
      `std::nullopt`.
    - `PickDevice` - выбираем свободный прибор, если есть. Если все заняты,
       возвращаем `std::nullopt`.
    - `DeviceProcessingTime` - возвращаем время работы для прибора с указанным
      `id`.
    - `SourcePeriod` - возвращаем период источника заявок.

    В конструкторе своего класса используйте метод `AddSpecialEvent`,
    чтобы добавить начальные события (Генерацию первых заявок от источников).

    **Важно**: когда будете добавлять поле для своего буфера (а без этого вы не
    сможете реализовать все необходимые методы), не забудьте о его очистке в методе
    `Reset` (Ну и о других своих полях, а тем более о генерации первых заявок от
    источников не забывайте).

3. Поздравляю! После инициализации вашего класса вам будут доступны методы:
    - `Step` - сделать шаг симуляции. (Возвращает особое событие, которое произошло).
    - `RunToCompletion` - симулирует до конца (Пока заданное количество заявок
      не будет сгенерированно)
    - `source_statistics` и `device_statistics` - самое интересное. Эти методы
      возвращают всю интересующую вас информацию об источниках и приборах.

## Пример использования
Лежит в папке example. Это полностью рабочая симуляция. Для сборки требуется библиотека
[tabulate](https://github.com/p-ranav/tabulate). Размеру кода и количеству файлов
не пугайтесь. Большинство из них к симуляции не относятся. Они нужны только для
консольного интерфейса.

Чтобы запустить, нужно скомпилировать проект, и вызвать программу каким-то таким образом:

`./a.out basic.conf -a -o`

**Самые интересные файлы**:
`example/simulator.cc` (Готовый симулятор) и
`example/print.cc` (Печать результатов).
